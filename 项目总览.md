# 电池容量预测项目 - 总览

## 🎯 项目简介

本项目使用机器学习方法（XGBoost）预测锂离子电池的容量衰减。通过分析电化学阻抗谱（EIS）、充放电曲线等多种特征，实现对电池下一个循环放电容量的准确预测。

### 核心功能
- ✅ 容量预测：预测电池下一个循环的放电容量
- ✅ 多数据集支持：支持4种不同的电池数据集
- ✅ 特征工程：提取10+种特征组合
- ✅ 集成学习：使用多个XGBoost模型进行集成预测
- ✅ 性能评估：完整的交叉验证和评估体系

### 技术栈
- **语言**: Python 3.7+
- **核心库**: XGBoost, Scikit-learn, NumPy, Pandas, SciPy
- **模型**: XGBoost梯度提升树
- **方法**: 集成学习、交叉验证、Bootstrap采样

---

## 📊 数据集概览

| 数据集名称 | 电池编号 | 数量 | 温度 | 数据目录 | 用途 |
|-----------|---------|------|------|---------|------|
| 可变放电 | PJ097-PJ152 | 24 | 常温 | `raw-data/variable-discharge/` | 训练和评估 |
| 固定放电 | PJ121-PJ136 | 16 | 常温 | `raw-data/fixed-discharge/` | 泛化测试 |
| 化学体系2-25°C | PJ248-PJ279 | 32 | 25°C | `raw-data/chemistry2-25C/` | 训练和评估 |
| 化学体系2-35°C | PJ296-PJ311 | 16 | 35°C | `raw-data/chemistry2-35C/` | 温度泛化测试 |

**总计**: 88个电池，约2500个循环数据点

---

## 🗂️ 项目结构

```
battery-forecasting-main/
│
├── 📄 文档索引.md                    # 📚 文档导航（从这里开始）
├── 📄 QUICKSTART_CN.md              # ⚡ 5分钟快速入门
├── 📄 README_CN.md                  # 📖 完整操作手册
├── 📄 CODE_COMMENTS_GUIDE.md        # 💻 代码注释指南
├── 📄 实验脚本说明.md                # 📝 实验脚本详解
├── 📄 项目总览.md                    # 🎯 本文件
│
├── 📁 raw-data/                     # 原始数据
│   ├── variable-discharge/          # 可变放电数据
│   ├── fixed-discharge/             # 固定放电数据
│   ├── chemistry2-25C/              # 化学体系2-25°C
│   └── chemistry2-35C/              # 化学体系2-35°C
│
├── 📁 experiments/                  # 实验脚本
│   ├── 1variable-discharge-train.py      # 可变放电训练
│   ├── 1next-cycle-capacity.py           # 交叉验证评估
│   ├── 1fixed-discharge-predict.py       # 固定放电预测
│   ├── 1data-efficiency.py               # 数据效率分析
│   ├── 1n-step-lookahead.py              # N步前瞻预测
│   ├── 2vd2-train.py                     # 化学体系2训练
│   ├── 2next-cycle-capacity-vd2.py       # 化学体系2评估
│   ├── 2vd2-predict.py                   # 35°C预测
│   └── results/                          # 结果保存目录
│
├── 📁 utils/                        # 工具函数
│   ├── exp_util.py                  # 标准数据集工具
│   ├── exp_util_new.py              # 新数据集工具
│   └── models.py                    # 模型定义
│
└── 📁 shell_scripts/                # Shell脚本
    ├── run-battery-cpu              # CPU运行脚本
    └── run-battery-gpu              # GPU运行脚本
```

---

## 🔬 核心技术

### 1. 特征提取

#### EIS特征（电化学阻抗谱）
```
原理: 在不同频率下测量电池阻抗
维度: 200 (100个频率点 × 2[实部+虚部])
优势: 反映电池内部状态，对早期老化敏感
```

#### C-V曲线特征（容量-电压曲线）
```
原理: 描述放电过程中容量与电压的关系
维度: 1000 (插值到1000个点)
优势: 反映电池整体性能
```

#### 充放电速率
```
原理: 充放电电流大小
维度: 3 (放电速率 + 两阶段充电速率)
优势: 直接影响容量，反映使用条件
```

#### 其他特征
```
- 累积吞吐量: 反映电池使用历史
- 上一循环容量: 反映当前状态
- SOH: 健康状态
- OCV: 开路电压
```

### 2. 模型架构

```
输入特征
    ↓
XGBoost模型1 ──┐
XGBoost模型2 ──┤
XGBoost模型3 ──┤ 集成学习
    ...        ├─→ 预测均值 ± 标准差
XGBoost模型10 ─┘
    ↓
预测结果
```

**集成学习优势**:
- 降低过拟合风险
- 提供不确定性估计
- 提高预测稳定性

### 3. 训练策略

#### Bootstrap采样
```
原始训练集 (100%)
    ↓
随机有放回抽样 (90%)
    ↓
训练子集1, 训练子集2, ..., 训练子集10
    ↓
模型1, 模型2, ..., 模型10
```

#### 交叉验证
```
留一电池出(Leave-One-Battery-Out):

第1折: 训练[电池2-24] → 测试[电池1]
第2折: 训练[电池1,3-24] → 测试[电池2]
...
第24折: 训练[电池1-23] → 测试[电池24]
```

---

## 📈 性能指标

### 典型结果（可变放电数据集）

| 特征组合 | R² | RMSE | MAE | 训练时间 |
|---------|-----|------|-----|---------|
| eis-actions | 0.95 | 0.030 Ah | 0.024 Ah | 5 min |
| cvfs-actions | 0.93 | 0.040 Ah | 0.032 Ah | 8 min |
| eis-cvfs-actions | 0.97 | 0.020 Ah | 0.016 Ah | 12 min |
| eis-cvfs-ct-c-actions | 0.98 | 0.015 Ah | 0.012 Ah | 15 min |

**指标说明**:
- **R²**: 决定系数，越接近1越好（范围0-1）
- **RMSE**: 均方根误差，越小越好（单位：Ah）
- **MAE**: 平均绝对误差，越小越好（单位：Ah）

### 跨数据集泛化

| 训练集 | 测试集 | R² | RMSE |
|-------|-------|-----|------|
| 可变放电 | 固定放电 | 0.91 | 0.035 Ah |
| 25°C | 35°C | 0.88 | 0.042 Ah |

---

## 🎯 应用场景

### 1. 电池健康管理
- 预测电池容量衰减趋势
- 提前发现异常老化
- 优化充放电策略

### 2. 维护计划优化
- 确定电池更换时机
- 规划维护周期
- 降低维护成本

### 3. 电池设计改进
- 分析不同因素对容量的影响
- 优化电池材料和结构
- 加速研发周期

### 4. 质量控制
- 早期筛选不良电池
- 预测电池寿命
- 提高产品可靠性

---